{"version":3,"sources":["ProtectedRoute.js","components/ArticleCreation.js","components/Login.js","components/Feed.js","components/Signup.js","components/ProfileBio.js","components/ProfilePage.js","components/ArticlePage.js","App.js","index.js"],"names":["ProtectedRoute","_ref","Component","component","isAuthenticated","rest","Object","objectWithoutProperties","react_default","a","createElement","Route","assign","render","props","Redirect","to","ArticleCreation","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","imgToAPI","asyncToGenerator","regenerator_default","mark","_callee","data","response","body","wrap","_context","prev","next","fetch","method","sent","json","status","Error","messsage","abrupt","stop","_x","apply","arguments","publish","_callee2","userInfo","_context2","setState","message","writer_id","state","writerID","title","selectedTitle","header_url","headerImgUrl","content","inputContent","headers","Accept","Content-type","JSON","stringify","accepted","parse","localStorage","getItem","articleCount","articleID","setItem","setTimeout","published","submitted","console","log","id","freeToAdd","handleTitleChange","bind","assertThisInitialized","handleAddParagraph","handleChangeParagraph","handleAddImg","handleHeaderImg","handleSubmitArticle","value","_this2","length","order","newParagraph","type","newIC","push","e","target","_this3","ic","toSend","FormData","append","files","then","res","newImage","cloudinary","secure_url","_this4","i","_this5","placeholder","maxLength","onChange","ArticleCreation_UploadHeaderImg","imgId","ArticleCreation_InputContent","contentArr","ArticleCreation_AddToContentButtons","onClick","ArticleCreation_MockArticle","React","UploadHeaderImg","label","htmlFor","accept","src","alt","InputContent","textAreaList","map","element","key","AddImageButton","AddToContentButtons","ArticleCreation_AddImageButton","MockArticle","writerName","firstname","lastname","articleBody","bio","LoginPage","submitToAPI","uAndE","enteredEmail","enteredPassword","handleEmail","handlePassword","validate","handleSubmit","email","password","document","cookie","OPtoken","OPuserInfo","userInfoString","authenticate","catch","err","Link","Feed","fetchFeed","request","filters","feed","selectedArticle","result","articleData","usableArr","Array","from","feedRender","articleInfo","Feed_ArticleHead","ArticleID","click","handleArticleClick","className","ArticleHead","urlString","HeadImage","concat","class","Title","Signup","signupToApi","formData","handleTyping","checkEmpty","values","_i","property","formObj","ProfileBio","obj","initialBio","editing","handleEditClick","handleBioChange","bioObj","userObj","removeItem","cols","rows","handleBioSubmit","ProfilePage","handleLogout","clear","ProfileBio_ProfileBio","ArticlePage","fetchArticle","initialRender","writerData","match","params","ArticlePage_Article","ArticlePage_WriterFooter","Article","Content","parseContentString","WriterFooter","name","FirstName","LastName","Bio","string","String","forEach","App","trueOrFalse","BrowserRouter","Header","exact","path","routeProps","Feed_Feed","Login_LoginPage","style","textDecoration","color","ReactDOM","App_App","getElementById"],"mappings":"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","file":"static/js/main.84d0a26c.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Redirect, Route } from 'react-router-dom'\r\n\r\nexport default ({ component: Component, isAuthenticated, ...rest }) =>{\r\n  return(\r\n    <Route {...rest} render={(props) =>(\r\n      isAuthenticated === true\r\n      ? <Component {...props} {...rest}/>\r\n      : <Redirect to='/login'/>\r\n    )}/>\r\n  )\r\n  \r\n}","import React from \"react\"\r\nimport {Redirect} from \"react-router-dom\"\r\n\r\nexport default class ArticleCreation extends React.Component{\r\n    // When the article creation component is created it \r\n    // has a state of nothing\r\n  constructor(props){\r\n      super(props)\r\n      // get user info\r\n      const userInfo = JSON.parse(localStorage.getItem(\"OPuserInfo\"))\r\n      var articleID = userInfo.articleCount + 1\r\n      console.log(\"UserInfo AC\",userInfo)\r\n      const writerID = userInfo.id \r\n      this.state = {\r\n          selectedTitle: '',\r\n          inputContent: [],\r\n          message: '',\r\n          headerImgUrl: '',\r\n          articleID: articleID,\r\n          writerID: writerID,\r\n          freeToAdd: true,\r\n          submitted: false,\r\n          published: false,\r\n      }\r\n\r\n      this.handleTitleChange = this.handleTitleChange.bind(this)\r\n      this.handleAddParagraph = this.handleAddParagraph.bind(this)\r\n      this.handleChangeParagraph = this.handleChangeParagraph.bind(this)\r\n      this.handleAddImg = this.handleAddImg.bind(this)\r\n      this.handleHeaderImg = this.handleHeaderImg.bind(this)\r\n      this.imgToAPI = this.imgToAPI.bind(this)\r\n      this.handleSubmitArticle = this.handleSubmitArticle.bind(this)\r\n      this.publish = this.publish.bind(this)\r\n  }\r\n  handleTitleChange(value) {\r\n    this.setState({\r\n      selectedTitle: value \r\n    })\r\n  }\r\n  handleAddParagraph(){\r\n    // only allow a paragraph to be added if the previous paragraph has some input\r\n    // or if nothing has been added yet\r\n    let length = this.state.inputContent.length\r\n    if(length === 0 || this.state.inputContent[length-1].content !== ''){\r\n        // append object to inputContent\r\n      // object should include type (paragraph/img), the order it is displayed in and the content\r\n      let order = this.state.inputContent.length\r\n      console.log(\"order\",order)\r\n      let newParagraph = {\r\n        \"order\": order,\r\n        \"type\": \"text\",\r\n        \"content\": '',\r\n      }\r\n      let newIC = this.state.inputContent\r\n      newIC.push(newParagraph)\r\n      this.setState({\r\n        inputContent: newIC,\r\n      },() => console.log(this.state.inputContent))\r\n    }\r\n    else{\r\n      let message = \"Please add some text to paragraph \" + length\r\n      this.setState({\r\n        message\r\n      })\r\n    }\r\n  }\r\n  handleChangeParagraph(order,e){\r\n    let newIC = this.state.inputContent\r\n    newIC[order].content = e.target.value\r\n    this.setState({\r\n      inputContent: newIC \r\n    })\r\n    console.log(\"here \" + order + e.target.value )\r\n  }\r\n  handleAddImg(e){\r\n    // add image to cloudinary and if successful, add to input content\r\n    let ic = this.state.inputContent\r\n    // there must be at least one paragraph before the image\r\n    if(ic.length > 0 && ic[ic.length-1].type === \"text\" && ic[ic.length-1].content !== ''){\r\n      // send image to api, type indicates the order of it in the content\r\n      // to ensure that we can't try and add a paragraph, screwing up the order\r\n      // we set state so that nothing new can be added\r\n      this.setState({freeToAdd: false})\r\n      const toSend = new FormData()\r\n      toSend.append('img',e.target.files[0])\r\n      toSend.append('type',ic.length)\r\n      toSend.append('writerId',this.state.writerID)\r\n      toSend.append('articleId',this.state.articleID)\r\n      this.imgToAPI(toSend)\r\n      .then((res) => {\r\n        if(res.accepted === true){\r\n          // add the image to inputContent\r\n          let ic = this.state.inputContent\r\n          let newImage = {\r\n            \"order\": ic.length,\r\n            \"type\": \"img\",\r\n            \"content\": res.cloudinary.secure_url,\r\n          }\r\n          ic.push(newImage)\r\n          this.setState({\r\n            inputContent: ic,\r\n            freeToAdd:true\r\n          })\r\n        }\r\n        else{\r\n          this.setState({message: \"Couldn't upload image, try again later\"})\r\n        }\r\n      })\r\n    }\r\n    else{\r\n      this.setState({message: \"A paragraph must precede an image\"})\r\n    }\r\n  }\r\n\r\n  handleHeaderImg(e){\r\n    // make an API call sending the image file, articleID and WriterID\r\n    const toSend = new FormData()\r\n    toSend.append('img',e.target.files[0])\r\n    toSend.append('type','header')\r\n    toSend.append('writerId',this.state.writerID)\r\n    toSend.append('articleId',this.state.articleID) \r\n    this.imgToAPI(toSend)\r\n    .then((res) => {\r\n      console.log(res)\r\n      if(res.accepted === true){\r\n        // save URL of headerImg\r\n        console.log(res.cloudinary.secure_url)\r\n        this.setState({\r\n          headerImgUrl: res.cloudinary.secure_url,\r\n          freeToAdd: true,\r\n        })\r\n      }\r\n      else{ this.setState({message: \"Couldn't upload image, try again later\"})}\r\n    })\r\n  }\r\n  imgToAPI = async (data) => {\r\n    const response = await fetch('/upload-img',{\r\n      method: 'POST',\r\n      body: data\r\n    })\r\n    const body = await response.json()\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    } \r\n    return body\r\n  }\r\n  handleSubmitArticle(){\r\n    // Get rid of the current message\r\n    this.setState({message:''})\r\n    // first check that there is a title, a header image and at least one paragraph of text\r\n    console.log(\"state\",this.state)\r\n    let ic = this.state.inputContent\r\n    for(let i = 0; i < ic.length; i++){\r\n      if(ic[i].type === 'text'){\r\n        ic = true\r\n        break\r\n      }\r\n    }\r\n    if(this.state.selectedTitle !== '' && this.state.headerImgUrl !== '' && ic === true){\r\n      // set submitted to true so user is shown a mock of how the article will look\r\n      console.log(\"Correct state\",this.state)\r\n      this.setState({submitted:true})\r\n    }\r\n    else{this.setState({message: \"You must at least enter a title, a header image and at least one paragraph of text\"})}\r\n  }\r\n  publish = async () => {\r\n    this.setState({message: \"Sending article to be published\"})\r\n    // submit all the info to the API to be stored in the DB\r\n    // Change local storage so that it reflects the new article has been made\r\n    // then redirect to home screen\r\n    //New articles in DB should have writerid, content, headerimg url, title\r\n    const data = {\r\n      writer_id: this.state.writerID,\r\n      title: this.state.selectedTitle,\r\n      header_url: this.state.headerImgUrl,\r\n      content: this.state.inputContent\r\n    }\r\n    const response = await fetch('/add-article',{\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept':'application/json, text/plain, */*',\r\n        'Content-type':'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n\r\n    const body = await response.json()\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    }\r\n    if(body.accepted === true){\r\n      this.setState({message:\"Thank you! Your article has been published successfully!\"})\r\n      // change local stoarage article count\r\n      let userInfo = JSON.parse(localStorage.getItem(\"OPuserInfo\"))\r\n      userInfo.articleCount = this.state.articleID\r\n      userInfo = JSON.stringify(userInfo)\r\n      localStorage.setItem(\"OPuserInfo\", userInfo)\r\n      // give time so that the user knows the article has been succesfully published\r\n      setTimeout(() =>{\r\n         // cause redirect\r\n        this.setState({published: true})\r\n      }, 1500)\r\n    }\r\n    else{\r\n      this.setState({\r\n        message: \"Couldn't publish, try again later\",\r\n        submitted: false,\r\n      })\r\n    }\r\n  }\r\n\r\n    render(){\r\n      if(this.state.published === true){\r\n        return (\r\n          <Redirect to='/'/>\r\n        )\r\n      }\r\n      if(this.state.submitted === false){\r\n        return (\r\n          <div>\r\n            <input \r\n              type='text'\r\n              placeholder='Enter title'\r\n              maxLength='100'\r\n              onChange={(e) => this.handleTitleChange(e.target.value)}\r\n            />\r\n            <UploadHeaderImg handleHeaderImg={this.handleHeaderImg} imgId={this.state.headerImgUrl} writerID={this.state.writerID} articleID={this.state.articleID}/>\r\n            <InputContent contentArr={this.state.inputContent} handleChangeParagraph={this.handleChangeParagraph}/>\r\n            <AddToContentButtons handleAddParagraph={this.handleAddParagraph} inputContent={this.state.inputContent} handleAddImg={this.handleAddImg} freeToAdd={this.state.freeToAdd}/>\r\n            <button onClick={() => this.handleSubmitArticle()}>Submit Article</button>\r\n            <p>{this.state.message}</p>\r\n          </div>\r\n        )\r\n      }\r\n      else{\r\n        return(\r\n          <div>\r\n            <MockArticle selectedTitle={this.state.selectedTitle} headerImgUrl={this.state.headerImgUrl} inputContent={this.state.inputContent}/>\r\n            <button onClick={() => this.setState({submitted:false})}>Edit</button>\r\n            <button onClick={() => this.publish()}>Publish</button>\r\n            <p>{this.state.message}</p>\r\n          </div>  \r\n          \r\n        )\r\n      }\r\n      \r\n    }\r\n}\r\n\r\nconst UploadHeaderImg = (props) => {\r\n  var label\r\n  if(props.status === ''){\r\n    label = \"Add header image\"\r\n    return(\r\n      <div>\r\n        <label htmlFor='headImage'>{label}</label>\r\n        <input\r\n          type='file'\r\n          id='headImage'\r\n          accept=\"image/png, image/jpeg\"\r\n          onChange={(e) => props.handleHeaderImg(e)}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n  else {\r\n    label = \"Change header\"\r\n    return(\r\n      <div>\r\n        <img src={props.imgId} alt={props.imgId}/>\r\n        <label htmlFor='headImage'>{label}</label>\r\n        <input\r\n          type='file'\r\n          id='headImage'\r\n          accept=\"image/png, image/jpeg\"\r\n          onChange={(e) => props.handleHeaderImg(e)}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst InputContent = (props) => {\r\n  const content = props.contentArr\r\n  // go through each element in the array, create an image tag for images and a textarea for paragraphs\r\n  const textAreaList = content.map((element) => {\r\n    return element.type === \"text\" ?\r\n      <textarea key={element.order} onChange={(e) => props.handleChangeParagraph(element.order,e)} value={element.content}/>\r\n    : \r\n      <img src={element.content} alt=''/>\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {textAreaList.map((element) => (\r\n          <li key={element.key}>{element}</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst AddImageButton = (props) => {\r\n  if(props.inputContent.length > 0 && props.inputContent[props.inputContent.length-1].content !== ''){\r\n    return(\r\n      <input\r\n        type='file'\r\n        id='image'\r\n        placeholder='Add image'\r\n        accept=\"image/png, image/jpeg\"\r\n        onChange={(e) => props.handleAddImg(e)}\r\n      />\r\n    )\r\n  }       //return nothing\r\n  else{return(<div></div>)}\r\n}\r\n\r\nconst AddToContentButtons = (props) => {\r\n  if(props.freeToAdd === true){\r\n    return(\r\n      <div>\r\n        <button onClick={() => props.handleAddParagraph()}>Add Paragraph</button>\r\n        <AddImageButton inputContent={props.inputContent} handleAddImg={props.handleAddImg}/>\r\n      </div>\r\n    )\r\n  }   //return nothing\r\n  else{return(<div></div>)}\r\n}\r\n\r\nconst MockArticle = (props) => {\r\n  // MockArticle just takes the article info and displays it\r\n  const userInfo = JSON.parse(localStorage.getItem(\"OPuserInfo\"))\r\n  const writerName = userInfo.firstname + \" \" + userInfo.lastname\r\n  const articleBody = props.inputContent.map((element) => {\r\n    return element.type === \"text\" ?\r\n      <p key={element.order}>{element.content}</p>\r\n    : \r\n      <img key={element.order} src={element.content} alt=''/>\r\n  })\r\n  return(\r\n    <div>\r\n      <img src={props.headerImgUrl} alt=''/>\r\n      <h1>{props.selectedTitle}</h1>\r\n      <div>\r\n        {articleBody}\r\n      </div>\r\n      <h4>Words by {writerName}</h4>\r\n      <p>{userInfo.bio}</p>\r\n    </div>\r\n  )\r\n}","import React from \"react\"\r\nimport { Redirect, Link } from 'react-router-dom'\r\n\r\nexport default class LoginPage extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      enteredEmail: '',\r\n      enteredPassword: '',\r\n      submitted: false,\r\n      accepted: false,\r\n      message: 'Enter your Email and password',\r\n      isAuthenticated: this.props.isAuthenticated,\r\n    }\r\n    this.handleEmail = this.handleEmail.bind(this)\r\n    this.handlePassword = this.handlePassword.bind(this)\r\n    this.validate = this.validate.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    this.submitToAPI = this.submitToAPI.bind(this)\r\n  }\r\n  handleEmail(value){\r\n    this.setState({\r\n      enteredEmail: value\r\n    })\r\n  }\r\n  handlePassword(value){\r\n    this.setState({\r\n      enteredPassword: value\r\n    })\r\n  }\r\n  // calls API after quick validation, changes message and accepted depending\r\n  // on result from API call\r\n  handleSubmit(){\r\n    if (this.validate() !== true){\r\n      this.setState({\r\n        message: 'Try agin'\r\n      })   \r\n    }\r\n    else {\r\n      console.log('State',this.state)\r\n      const email = this.state.enteredEmail\r\n      const password = this.state.enteredPassword\r\n      const data = {\r\n        email: email,\r\n        password: password,\r\n      }\r\n      console.log(\"Here\",data)\r\n      this.submitToAPI(data)\r\n      .then(res => {\r\n        console.log(\"res\",res)\r\n        this.setState({ \r\n          message: res.message,\r\n          accepted: res.accepted\r\n        })\r\n        if(this.state.accepted === true){\r\n          // put JWT in cookie, first deleting an already existing one\r\n          document.cookie = \"OPtoken; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n          document.cookie = \"OPtoken=\" + res.OPtoken\r\n          // store info in local storage\r\n          console.log(\"res\",res)\r\n          console.log(\"USERINGo\",res.OPuserInfo)\r\n          var userInfoString = JSON.stringify(res.OPuserInfo)\r\n          localStorage.setItem('OPuserInfo',userInfoString)\r\n          setTimeout(() => {\r\n            this.props.authenticate(true) \r\n            // calling setState re renders the component causing a redirect since isAuthenticated is now true\r\n            this.setState({\r\n              isAuthenticated: this.props.isAuthenticated\r\n            })// reset to time once development is done\r\n          }, 0)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        this.setState({\r\n          message: 'There was a problem, try again later'\r\n        })\r\n      })\r\n    }\r\n  }\r\n  // POSTs email and password to API\r\n  submitToAPI = async (uAndE) => {\r\n    const response = await fetch('/login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept':'application/json, text/plain, */*',\r\n        'Content-type':'application/json'\r\n      },\r\n      body: JSON.stringify(uAndE)\r\n    })\r\n    const body = await response.json()\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    } \r\n    return body\r\n  }\r\n  \r\n  validate(){\r\n    if( this.state.enteredEmail.length > 0 && this.state.enteredPassword.length > 0 ){\r\n      return true\r\n    } else { return false }\r\n  }\r\n\r\n  \r\n  render(){\r\n    if(this.state.isAuthenticated){\r\n      return(\r\n        <Redirect to='/'/>\r\n      )\r\n    }\r\n    return(\r\n      <div>\r\n        <h2>Login</h2>\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Email\" \r\n          value={this.state.enteredEmail} \r\n          onChange={(e) => this.handleEmail(e.target.value)}\r\n        />\r\n        <input \r\n          type=\"password\" \r\n          placeholder=\"Password\" \r\n          onChange={(e) => this.handlePassword(e.target.value)}\r\n        />\r\n        <button onClick={() => this.handleSubmit()}>Submit</button>\r\n        <h3>{this.state.message}</h3>\r\n        \r\n        <Link to='/signup'>Sign Up!</Link>\r\n      \r\n      </div>\r\n    )  \r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default class Feed extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      filters: '',\r\n      feed: [],\r\n      selectedArticle: [],\r\n    }\r\n    this.fetchFeed = this.fetchFeed.bind(this)\r\n    \r\n  }\r\n  componentDidMount(){\r\n    // TODO: add filters so that they can be sent and a different feed is returned\r\n    this.fetchFeed(this.state)\r\n    .then((result) => {\r\n      if(result.articleData !== false){\r\n        const usableArr = Array.from(result.result)\r\n        this.setState({\r\n          feed: usableArr\r\n        },() => console.log(this.state))\r\n      }\r\n      else{\r\n        this.setState({\r\n          feed: false,\r\n        })\r\n      }\r\n    })\r\n  }\r\n  // makes a get request for the articles\r\n  fetchFeed = async (request) => {\r\n    const response = await fetch('/get-feed', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept':'application/json, text/plain, */*',\r\n        'Content-type':'application/json'\r\n      },\r\n      body: JSON.stringify(request)\r\n    })\r\n    const body = await response.json()\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    } \r\n    return body\r\n  }\r\n  \r\n  render(){\r\n    if(this.state.feed !== false){\r\n      const feedArr = this.state.feed\r\n      // add a className to the first three elements\r\n      const feedRender = feedArr.map((articleInfo) => \r\n        <ArticleHead key={articleInfo.ArticleID} {...articleInfo} click={this.handleArticleClick} />\r\n      )\r\n      console.log(\"feedrender\",feedRender)\r\n      return(\r\n        <div className='feed'>\r\n          {feedRender}\r\n        </div>\r\n      )\r\n    }\r\n    else{\r\n      return(\r\n        <div>\r\n          Sorry, couldn't retrieve articles\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst ArticleHead = (props) => {\r\n  // each article head will render the image and title, and\r\n  // it will be a link to the article page\r\n  console.log(\"AHEad props\", props)\r\n  const urlString = props.HeadImage\r\n  // style = {\r\n  //   background: urlString,\r\n  //   height: 200px,\r\n  //   overflow: hidden,\r\n  //   box-shadow: 0 1px 5px rgba(104, 104, 104, 0.8),\r\n  //   padding: 3rem,\r\n  //   border-bottom: var(--acc-border),\r\n  // }\r\n  return(\r\n    <div className='articleHeads'>\r\n      <Link to={`/article/${props.ArticleID}`}>\r\n        <img class='resize' src={urlString} alt=''/>\r\n        <h3>{props.Title}</h3>\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\n\r\n","import React from \"react\"\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nexport default class Signup extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      message: \"\",\r\n      formData:{\r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n      },\r\n      accepted: false,\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    this.handleTyping = this.handleTyping.bind(this)\r\n    this.checkEmpty = this.checkEmpty.bind(this)\r\n    this.signupToApi = this.signupToApi.bind(this)\r\n  }\r\n\r\n  checkEmpty(){\r\n    // create an array of the values in formData\r\n    const values = Object.values(this.state.formData)\r\n    //loop through to check a value is provided for each\r\n    for(var x of values){\r\n      if(x === \"\"){\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n  handleSubmit(){\r\n    if(this.checkEmpty() === false){\r\n      //connect to backend\r\n      this.signupToApi(this.state.formData)\r\n      .then(res => {\r\n        console.log(res)\r\n        this.setState({\r\n          message: res.message,\r\n        })\r\n        //Once they've succesfully signed up they're redirected to the login page\r\n        setTimeout(() => {\r\n          // calling setState re renders with accepted = true so that they are redirected\r\n          this.setState({\r\n            accepted: res.accepted,\r\n          })\r\n        }, 2000)\r\n      })\r\n    }\r\n    else{\r\n      this.setState({\r\n        message: \"You must provide all details\"\r\n      })\r\n    }\r\n    \r\n  }\r\n  //sends form data to server\r\n  signupToApi = async (formData) => {\r\n    const response = await fetch('/signup',{\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept':'application/json, text/plain, */*',\r\n        'Content-type':'application/json'\r\n      },\r\n      body: JSON.stringify(formData)\r\n    })\r\n    const body = await response.json()\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    } \r\n    return body\r\n  }\r\n  handleTyping(value, property){\r\n    let formObj = this.state.formData\r\n    formObj[property] = value\r\n    this.setState({\r\n      formData: formObj,\r\n    })\r\n  }\r\n  render(){\r\n    if(this.state.accepted === true){\r\n      return(\r\n        <Redirect to='/login'/>\r\n      )\r\n    }\r\n    return(\r\n      <div>\r\n        <h1>Sign Up</h1>\r\n        First Name: <br/>\r\n        <input\r\n          type=\"text\"\r\n          value={this.state.formData.firstname}\r\n          onChange={(e) => this.handleTyping(e.target.value,\"firstname\")}\r\n        />\r\n        <br/>Second Name: <br/>\r\n        <input\r\n          type=\"text\"\r\n          value={this.state.formData.lastname}\r\n          onChange={(e) => this.handleTyping(e.target.value,\"lastname\")}\r\n        />\r\n        <br/>Email: <br/>\r\n        <input\r\n          type=\"text\"\r\n          value={this.state.formData.email}\r\n          onChange={(e) => this.handleTyping(e.target.value,\"email\")}\r\n        />\r\n        <br/>Password: <br/>\r\n        <input\r\n          type=\"password\"\r\n          onChange={(e) => this.handleTyping(e.target.value,\"password\")}\r\n        />\r\n        <br/>\r\n        <button onClick={() => this.handleSubmit()}>Submit</button>\r\n        <h3>{this.state.message}</h3>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react'\r\n\r\nexport default class ProfileBio extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    // storing bio as null is problematic with textarea below\r\n    // therefore setting bio in state to empty string instead\r\n    if(props.bio === null){\r\n      var initialBio = ''\r\n    }\r\n    else{initialBio = props.bio}\r\n    this.state = {\r\n      editing: false,\r\n      bio: initialBio,\r\n      message: '',\r\n    }\r\n    this.handleEditClick = this.handleEditClick.bind(this)\r\n    this.handleBioChange = this.handleBioChange.bind(this)\r\n    this.submitToAPI = this.submitToAPI.bind(this)\r\n  }\r\n  handleEditClick(){\r\n    this.setState({\r\n      editing: true,\r\n    })\r\n  }\r\n  handleBioChange(value){\r\n    this.setState({\r\n      bio: value\r\n    })\r\n  }\r\n  handleBioSubmit(){\r\n    // connect to API and if successful, update local state\r\n    var id = this.props.id\r\n    const bioObj = {\r\n      bio: this.state.bio,\r\n      id: id,\r\n    }\r\n    console.log(bioObj)\r\n    this.submitToAPI(bioObj)\r\n    .then(res => {\r\n      console.log(res)\r\n      if(res.accepted === true){\r\n        // update local storage with new bio\r\n        var userObj = JSON.parse(localStorage.getItem('OPuserInfo'))\r\n        userObj.bio = this.state.bio\r\n        localStorage.removeItem('OPuserInfo')\r\n        localStorage.setItem('OPuserInfo',JSON.stringify(userObj))\r\n      }\r\n      this.setState({\r\n        message: res.message,\r\n        editing: false,\r\n      })\r\n    })\r\n  }\r\n  submitToAPI = async (obj) => {\r\n    console.log(\"SubmitToAPI\")\r\n    const response = await fetch('/updateBio', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept':'application/json, text/plain, */*',\r\n        'Content-type':'application/json'\r\n      },\r\n      body: JSON.stringify(obj)\r\n    })\r\n    console.log(\"Post stringify\")\r\n    const body = await response.json()\r\n    console.log(\"POST response.json\")\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    } \r\n    return body\r\n  } \r\n  render(){\r\n    if(this.state.bio === '' && this.state.editing === false){\r\n      return (\r\n        <div>\r\n          <label>Your Bio</label>\r\n          <p>-- Your bio is undefined, select 'Edit' below to add a bio --</p>\r\n          <button onClick={() => this.handleEditClick()}>Edit</button>\r\n        </div>\r\n      )\r\n    }\r\n    else {\r\n      if(this.state.editing === false){\r\n        return(\r\n          <div>\r\n            <label>Your Bio</label>\r\n            <p>{this.state.bio}</p>\r\n            <button onClick={() => this.handleEditClick()}>Edit</button>\r\n            <p>{this.state.message}</p>\r\n          </div>\r\n        )\r\n      }\r\n      else{\r\n        return(\r\n          <div>\r\n            <label>Your Bio</label>\r\n            <br/>\r\n            <textarea\r\n              cols=\"50\"\r\n              rows=\"5\"\r\n              maxLength=\"1000\"\r\n              value={this.state.bio} \r\n              onChange={(e) => this.handleBioChange(e.target.value)}\r\n            />\r\n            <button onClick={() => this.handleBioSubmit()}>Submit</button>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  }\r\n  \r\n}","import React from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport ProfileBio from './ProfileBio'\r\n\r\n\r\nexport default class ProfilePage extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    const userInfo = JSON.parse(localStorage.getItem(\"OPuserInfo\"))\r\n    this.state = {\r\n      userInfo: userInfo,\r\n    }\r\n    this.handleLogout = this.handleLogout.bind(this)\r\n  } \r\n  handleLogout(){\r\n    // delete cookie and local storage\r\n    // set auth to false\r\n    // redirect?\r\n    localStorage.clear()\r\n    document.cookie = 'OPtoken =; expires=Thu, 01 Jan 1970 00:00:01 GMT;'\r\n    this.props.authenticate(false)\r\n    console.log(\"props\",this.props)\r\n  }\r\n  render(){\r\n    return(\r\n      <div>\r\n        <h1>{this.state.userInfo.firstname} {this.state.userInfo.lastname}</h1>\r\n        <ProfileBio bio = {this.state.userInfo.bio} id={this.state.userInfo.id}/>\r\n        <button><Link to={`/create-article/${this.state.userInfo.id}`}>Create Article</Link></button>\r\n        <button onClick={() => this.handleLogout()}>Logout <b>{this.state.userInfo.email}</b></button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n","import React, {Component} from 'react'\r\n\r\nexport default class ArticlePage extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      initialRender: true,\r\n      articleData: [],\r\n      writerData: [],\r\n    }\r\n    this.fetchArticle = this.fetchArticle.bind(this)\r\n  }\r\n  componentDidMount(){\r\n    // call API, get the article stuff\r\n    console.log(this.props.match.params)\r\n    this.fetchArticle(this.props.match.params)\r\n    .then((res) => {\r\n      this.setState({\r\n        articleData: res.articleData,\r\n        writerData: res.writerData,\r\n        initialRender: false\r\n      })\r\n    })\r\n  }\r\n  fetchArticle = async (request) => {\r\n    const response = await fetch('/get-article', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept':'application/json, text/plain, */*',\r\n        'Content-type':'application/json'\r\n      },\r\n      body: JSON.stringify(request)\r\n    })\r\n    const body = await response.json()\r\n    // 200 is the http code signalling the request is successful\r\n    if (response.status !== 200){\r\n      throw Error(body.messsage)\r\n    } \r\n    return body\r\n  }\r\n  render(){\r\n    if(this.state.initialRender === true){\r\n      return <div></div>\r\n    }\r\n    else if(this.state.articleData !== false){\r\n      return(\r\n        <div>\r\n          <Article data={this.state.articleData}/>\r\n          <WriterFooter data={this.state.writerData}/>  \r\n        </div>\r\n      )\r\n    }\r\n    else{\r\n      return(\r\n        <h2>Sorry couldn't retrieve the article</h2>\r\n      )\r\n    }\r\n    \r\n  }\r\n}\r\n\r\nconst Article = (props) => {\r\n  console.log(\"C\",props.data.Content)\r\n  console.log(\"type\", typeof props.data.Content)\r\n  // props.data.Content is a string but can't be parsed with \r\n  // JSON.parse because it is an array of objects eg. [{},{}...]\r\n  let content = parseContentString(props.data.Content)\r\n    const articleBody = content.map((element) => {\r\n      console.log(element.order)\r\n      return element.type === \"text\" ?\r\n        <p key={element.order}>{element.content}</p>\r\n      : \r\n        <img key={element.order} src={element.content} alt=''/>\r\n    })\r\n  return(\r\n    <div>\r\n      <img src={props.data.HeadImage} alt='Could not retrieve'/>\r\n      <h1>{props.data.Title}</h1>\r\n      <div>{articleBody}</div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nconst WriterFooter = (props) => {\r\n  const name = props.data.FirstName + \" \" + props.data.LastName\r\n  return(\r\n    <div>\r\n      <h4>Words by {name}</h4>\r\n      <p>{props.data.Bio}</p>\r\n    </div>\r\n    \r\n  ) \r\n}\r\n\r\nconst parseContentString = (string) => {\r\n  // content is stored as a stringified array of objects\r\n  // the objects must be matched with regex, parsed and sent back as \r\n  // an array of objects\r\n  let contentArr = []\r\n  let stringed = String(string)\r\n  const objRegex = /\\{.*?\\}/g\r\n  let match = stringed.match(objRegex)\r\n  match.forEach((element) => {\r\n    let obj = JSON.parse(element)\r\n    contentArr.push(obj)\r\n  })\r\n  console.log(\"type\",typeof contentArr)\r\n  return(contentArr)\r\n}","import React, { Component } from 'react';\nimport {\n  BrowserRouter as Router, \n  Route,\n  Link,\n} from \"react-router-dom\"\nimport \"./css/main.css\"\n\nimport ProtectedRoute from './ProtectedRoute'\nimport ArticleCreation from \"./components/ArticleCreation\"\nimport LoginPage from \"./components/Login\"\nimport Feed from \"./components/Feed\"\nimport Signup from \"./components/Signup\"\nimport ProfilePage from \"./components/ProfilePage\"\nimport Article from \"./components/ArticlePage\"\n\n// Onpoint will always have the header and the footer\n// So app will always render the header and footer components\n// The body will be change depending on what the user is doing\nexport default class App extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      isAuthenticated: false,\n      userInfo: null,\n    }\n    this.authenticate = this.authenticate.bind(this)\n  }\n  \n  // sets whether the user is authorised or not\n  authenticate(trueOrFalse){\n    if(trueOrFalse === true){\n      const userInfo = JSON.parse(localStorage.getItem(\"OPuserInfo\"))\n      console.log(\"Userinfo\",userInfo)\n      this.setState({\n        isAuthenticated: trueOrFalse,\n        userInfo: userInfo\n      })\n      console.log(\"STATE u info\",this.state.userInfo)\n    }\n    else{\n      // delete cookie and local storage\n      document.cookie = \"OPtoken; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\"\n      localStorage.removeItem('OPuserInfo')\n      this.setState({\n        isAuthenticated: false, \n      })\n    }\n    \n  }\n  render() {\n    return (\n      <Router>\n        <div className=\"wrapper\">\n          <Header isAuthenticated = {this.state.isAuthenticated} userInfo = {this.state.userInfo}/>\n          <Route exact path='/' \n            render={(routeProps) =>(\n              <Feed {...routeProps} className='feed'/>\n            )} \n          />\n          <ProtectedRoute path='/create-article/:userId' component={ArticleCreation} isAuthenticated={this.state.isAuthenticated}/>\n          <Route path='/signup' component={Signup}/>\n          <Route path='/login' \n            render={(routeProps) => (\n              <LoginPage {...routeProps} authenticate={this.authenticate} isAuthenticated={this.state.isAuthenticated}/>\n            )}\n          />\n          <ProtectedRoute path='/profile/:userId' component={ProfilePage}\n            isAuthenticated={this.state.isAuthenticated} \n            authenticate={this.authenticate}\n          />\n          <Route\n            path='/article/:articleId'\n            component={Article}\n          />\n        </div>\n      </Router>\n    );\n  }\n}\n\n// The header, is always there, contains links to login and menu\nfunction Header (props) {\n  if(props.isAuthenticated === true){\n    return(\n      <header className='header'>\n        <ul>\n          <li><Link to ='/' style={{textDecoration:'none',color:'black'}}><h1>Shouter</h1></Link></li>\n          <li className='loginButton'><Link to={`/profile/${props.userInfo.id}`}>{props.userInfo.firstname}</Link></li>\n        </ul>\n        \n      </header>        \n    )\n  }\n  else{\n    return(\n      <header className='header'>\n        <div></div>\n        <ul>\n          <li><Link to ='/'style={{textDecoration:'none', color:'black'}}><h1>Shouter</h1></Link></li>\n          <li className='loginButton'><Link to='/login'>Login</Link></li>\n        </ul>\n        \n      </header>   \n    )\n  }\n  \n}\n\n\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('app'))\n\n"],"sourceRoot":""}