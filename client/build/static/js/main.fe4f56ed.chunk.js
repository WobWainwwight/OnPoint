(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(32)},25:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),l=a.n(i),s=a(4),c=a(5),o=a(8),u=a(6),h=a(7),d=a(2),m=a(36),p=a(34),b=a(33),g=(a(25),a(18)),f=a(35),E=function(e){var t=e.component,a=e.isAuthenticated,n=Object(g.a)(e,["component","isAuthenticated"]);return r.a.createElement(p.a,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(f.a,{to:"/login"})}}))},O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={selectedTitle:"",inputContent:[],message:""},a.handleTitleChange=a.handleTitleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleAddParagraph=a.handleAddParagraph.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeParagraph=a.handleChangeParagraph.bind(Object(d.a)(Object(d.a)(a))),a.handleAddImg=a.handleAddImg.bind(Object(d.a)(Object(d.a)(a))),a.handleHeaderImg=a.handleHeaderImg.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({selectedTitle:e})}},{key:"handleAddParagraph",value:function(){var e=this,t=this.state.inputContent.length;if(0===t||""!==this.state.inputContent[t-1].content){var a=this.state.inputContent.length;console.log("order",a);var n={order:a,type:"text",content:""},r=this.state.inputContent;r.push(n),this.setState({inputContent:r},function(){return console.log(e.state.inputContent)})}else{var i="Please add some text to paragraph "+t;this.setState({message:i})}}},{key:"handleChangeParagraph",value:function(e,t){var a=this.state.inputContent;a[e].content=t.target.value,this.setState({inputContent:a}),console.log("here "+e+t.target.value)}},{key:"handleAddImg",value:function(){}},{key:"handleHeaderImg",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Enter title",maxLength:"100",onChange:function(t){return e.handleTitleChange(t.target.value)}}),r.a.createElement("label",{for:"headImage"},"Add head image"),r.a.createElement("input",{type:"file",id:"headImage",placeholder:"Add head image",accept:"image/png, image/jpeg"}),r.a.createElement(v,{contentArr:this.state.inputContent,handleChangeParagraph:this.handleChangeParagraph}),r.a.createElement("button",{onClick:function(){return e.handleAddParagraph()}},"Add Paragraph"),r.a.createElement("button",{onClick:function(){return e.handleAddImg()}},"Add Image"),r.a.createElement("p",null,this.state.message))}}]),t}(r.a.Component),v=function(e){var t=e.contentArr.map(function(t){return r.a.createElement("textarea",{key:t.order,onChange:function(a){return e.handleChangeParagraph(t.order,a)},value:t.content})});return r.a.createElement("div",null,r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e.key},e)})))},j=a(11),y=a.n(j),k=a(13),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).submitToAPI=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/login",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.messsage);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={enteredEmail:"",enteredPassword:"",submitted:!1,accepted:!1,message:"Enter your Email and password",isAuthenticated:a.props.isAuthenticated},a.handleEmail=a.handleEmail.bind(Object(d.a)(Object(d.a)(a))),a.handlePassword=a.handlePassword.bind(Object(d.a)(Object(d.a)(a))),a.validate=a.validate.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.submitToAPI=a.submitToAPI.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleEmail",value:function(e){this.setState({enteredEmail:e})}},{key:"handlePassword",value:function(e){this.setState({enteredPassword:e})}},{key:"handleSubmit",value:function(){var e=this;if(!0!==this.validate())this.setState({message:"Try agin"});else{console.log("State",this.state);var t={email:this.state.enteredEmail,password:this.state.enteredPassword};console.log("Here",t),this.submitToAPI(t).then(function(t){if(console.log("res",t),e.setState({message:t.message,accepted:t.accepted}),!0===e.state.accepted){document.cookie="OPtoken; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="OPtoken="+t.OPtoken,console.log("res",t),console.log("USERINGo",t.OPuserInfo);var a=JSON.stringify(t.OPuserInfo);localStorage.setItem("OPuserInfo",a),setTimeout(function(){e.props.authenticate(!0),e.setState({isAuthenticated:e.props.isAuthenticated})},0)}}).catch(function(t){console.log(t),e.setState({message:"There was a problem, try again later"})})}}},{key:"validate",value:function(){return this.state.enteredEmail.length>0&&this.state.enteredPassword.length>0}},{key:"render",value:function(){var e=this;return this.state.isAuthenticated?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("input",{type:"text",placeholder:"Email",value:this.state.enteredEmail,onChange:function(t){return e.handleEmail(t.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(t){return e.handlePassword(t.target.value)}}),r.a.createElement("button",{onClick:function(){return e.handleSubmit()}},"Submit"),r.a.createElement("h3",null,this.state.message),r.a.createElement(b.a,{to:"/signup"},"Sign Up!"))}}]),t}(r.a.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={welcome:"Welcome"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.welcome))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).signupToApi=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/signup",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.messsage);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={message:"",formData:{firstname:"",lastname:"",email:"",password:""},accepted:!1},a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleTyping=a.handleTyping.bind(Object(d.a)(Object(d.a)(a))),a.checkEmpty=a.checkEmpty.bind(Object(d.a)(Object(d.a)(a))),a.signupToApi=a.signupToApi.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"checkEmpty",value:function(){for(var e=Object.values(this.state.formData),t=0;t<e.length;t++){if(""===e[t])return!0}return!1}},{key:"handleSubmit",value:function(){var e=this;!1===this.checkEmpty()?this.signupToApi(this.state.formData).then(function(t){console.log(t),e.setState({message:t.message}),setTimeout(function(){e.setState({accepted:t.accepted})},2e3)}):this.setState({message:"You must provide all details"})}},{key:"handleTyping",value:function(e,t){var a=this.state.formData;a[t]=e,this.setState({formData:a})}},{key:"render",value:function(){var e=this;return!0===this.state.accepted?r.a.createElement(f.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),"First Name: ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.formData.firstname,onChange:function(t){return e.handleTyping(t.target.value,"firstname")}}),r.a.createElement("br",null),"Second Name: ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.formData.lastname,onChange:function(t){return e.handleTyping(t.target.value,"lastname")}}),r.a.createElement("br",null),"Email: ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.formData.email,onChange:function(t){return e.handleTyping(t.target.value,"email")}}),r.a.createElement("br",null),"Password: ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",onChange:function(t){return e.handleTyping(t.target.value,"password")}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.handleSubmit()}},"Submit"),r.a.createElement("h3",null,this.state.message))}}]),t}(r.a.Component),A=function(e){function t(e){var a;if(Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).submitToAPI=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SubmitToAPI"),e.next=3,fetch("/updateBio",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,console.log("Post stringify"),e.next=7,a.json();case 7:if(n=e.sent,console.log("POST response.json"),200===a.status){e.next=11;break}throw Error(n.messsage);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),null===e.bio)var n="";else n=e.bio;return a.state={editing:!1,bio:n,message:""},a.handleEditClick=a.handleEditClick.bind(Object(d.a)(Object(d.a)(a))),a.handleBioChange=a.handleBioChange.bind(Object(d.a)(Object(d.a)(a))),a.submitToAPI=a.submitToAPI.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleEditClick",value:function(){this.setState({editing:!0})}},{key:"handleBioChange",value:function(e){this.setState({bio:e})}},{key:"handleBioSubmit",value:function(){var e=this,t=this.props.id,a={bio:this.state.bio,id:t};console.log(a),this.submitToAPI(a).then(function(t){if(console.log(t),!0===t.accepted){var a=JSON.parse(localStorage.getItem("OPuserInfo"));a.bio=e.state.bio,localStorage.removeItem("OPuserInfo"),localStorage.setItem("OPuserInfo",JSON.stringify(a))}e.setState({message:t.message,editing:!1})})}},{key:"render",value:function(){var e=this;return""===this.state.bio&&!1===this.state.editing?r.a.createElement("div",null,r.a.createElement("label",null,"Your Bio"),r.a.createElement("p",null,"-- Your bio is undefined, select 'Edit' below to add a bio --"),r.a.createElement("button",{onClick:function(){return e.handleEditClick()}},"Edit")):!1===this.state.editing?r.a.createElement("div",null,r.a.createElement("label",null,"Your Bio"),r.a.createElement("p",null,this.state.bio),r.a.createElement("button",{onClick:function(){return e.handleEditClick()}},"Edit"),r.a.createElement("p",null,this.state.message)):r.a.createElement("div",null,r.a.createElement("label",null,"Your Bio"),r.a.createElement("br",null),r.a.createElement("textarea",{cols:"50",rows:"5",maxLength:"1000",value:this.state.bio,onChange:function(t){return e.handleBioChange(t.target.value)}}),r.a.createElement("button",{onClick:function(){return e.handleBioSubmit()}},"Submit"))}}]),t}(r.a.Component),P=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));var n=JSON.parse(localStorage.getItem("OPuserInfo"));return a.state={userInfo:n},a.handleLogout=a.handleLogout.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleLogout",value:function(){this.props.authenticate(!1),console.log("props",this.props)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.userInfo.firstname," ",this.state.userInfo.lastname),r.a.createElement(A,{bio:this.state.userInfo.bio,id:this.state.userInfo.id}),r.a.createElement("button",null,r.a.createElement(b.a,{to:"/create-article/".concat(this.state.userInfo.id)},"Create Article")),r.a.createElement("button",{onClick:function(){return e.handleLogout()}},"Logout ",r.a.createElement("b",null,this.state.userInfo.email)))}}]),t}(r.a.Component),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={isAuthenticated:!1,userInfo:null},a.authenticate=a.authenticate.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"authenticate",value:function(e){if(!0===e){var t=JSON.parse(localStorage.getItem("OPuserInfo"));console.log("Userinfo",t),this.setState({isAuthenticated:e,userInfo:t}),console.log("STATE u info",this.state.userInfo)}else document.cookie="OPtoken; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("OPuserInfo"),this.setState({isAuthenticated:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(w,{isAuthenticated:this.state.isAuthenticated,userInfo:this.state.userInfo}),r.a.createElement(p.a,{exact:!0,path:"/",component:S}),r.a.createElement(E,{path:"/create-article/:userId",component:O,isAuthenticated:this.state.isAuthenticated}),r.a.createElement(p.a,{path:"/signup",component:I}),r.a.createElement(p.a,{path:"/login",render:function(t){return r.a.createElement(C,Object.assign({},t,{authenticate:e.authenticate,isAuthenticated:e.state.isAuthenticated}))}}),r.a.createElement(E,{path:"/profile/:userId",component:P,isAuthenticated:this.state.isAuthenticated,authenticate:this.authenticate})))}}]),t}(n.Component);function w(e){return!0===e.isAuthenticated?r.a.createElement("header",null,r.a.createElement("ul",{id:"headerLinks"},r.a.createElement("li",null,r.a.createElement(b.a,{to:"/menu"},r.a.createElement("h1",null,"Menu"))),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/"},r.a.createElement("h1",null,"OnPoint"))),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/profile/".concat(e.userInfo.id)},r.a.createElement("h1",null,e.userInfo.firstname))))):r.a.createElement("header",null,r.a.createElement("ul",{id:"headerLinks"},r.a.createElement("li",null,r.a.createElement(b.a,{to:"/menu"},r.a.createElement("h1",null,"Menu"))),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/"},r.a.createElement("h1",null,"OnPoint"))),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/login"},r.a.createElement("h1",null,"Login")))))}l.a.render(r.a.createElement(T,null),document.getElementById("app"))}},[[19,2,1]]]);
//# sourceMappingURL=main.fe4f56ed.chunk.js.map